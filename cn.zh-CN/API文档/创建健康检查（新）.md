# 创建健康检查（新）

调用AddDnsGtmMonitor创建健康检查。

****

## 调试

[您可以在OpenAPI Explorer中直接运行该接口，免去您计算签名的困扰。运行成功后，OpenAPI Explorer可以自动生成SDK代码示例。](https://api.aliyun.com/#product=Alidns&api=AddDnsGtmMonitor&type=RPC&version=2015-01-09)

## 请求参数

|名称|类型|是否必选|示例值|描述|
|--|--|----|---|--|
|Action|String|是|AddDnsGtmMonitor|系统规定参数。取值：AddDnsGtmMonitor。 |
|AddrPoolId|String|是|pool1|地址池id。 |
|EvaluationCount|Integer|是|1|连续次数。 |
|Interval|Integer|是|60|检查间隔，单位秒。 |
|MonitorExtendInfo|String|是|\{\\"code\\":200,\\"path\\":\\"\\\\index.htm\\",\\"host\\":\\"aliyun.com\\"\}|扩展信息，各协议检查所需参数：

 -   HTTP\(S\)：
    -   port：检查端口
    -   host：Host设置
    -   path：URL路径
    -   code：返回码大于
    -   failureRate：失败率
    -   sni：是否开启sni，仅在HTTPS协议时使用。
        -   true-开启
        -   其他-未开启
    -   nodeType：地址池类型为DOMAIN时，健康检查监控节点类型：
        -   IPV4
        -   IPV6
-   PING：
    -   failureRate：失败率
    -   packetNum：ping包数
    -   packetLossRate：ping丢包率
    -   nodeType：地址池类型为DOMAIN时，健康检查监控节点类型：
        -   IPV4
        -   IPV6
-   TCP：
    -   port：检查端口
    -   failureRate：失败率
    -   nodeType：地址池类型为DOMAIN时，健康检查监控节点类型：
        -   IPV4
        -   IPV6 |
|ProtocolType|String|是|http|检查协议：

 -   HTTP
-   HTTPS
-   PING
-   TCP |
|Timeout|Integer|是|30000|超时时间，单位毫秒。 |
|Lang|String|否|en|部分返回参数语言。默认值：en。取值范围：en、zh、ja。 |
|IspCityNode.N.CityCode|String|否|123|监控节点-城市code。 |
|IspCityNode.N.IspCode|String|否|123|监控节点-运营商code。 |

## 返回数据

|名称|类型|示例值|描述|
|--|--|---|--|
|MonitorConfigId|String|MonitorConfigId1|健康检查配置id。 |
|RequestId|String|6856BCF6-11D6-4D7E-AC53-FD579933522B|唯一请求识别码。 |

## 示例

请求示例

```
http(s)://alidns.aliyuncs.com/?Action=AddDnsGtmMonitor
&AddrPoolId=pool1
&EvaluationCount=1
&Interval=60
&MonitorExtendInfo={\"code\":200,\"path\":\"\\index.htm\",\"host\":\"aliyun.com\"}
&ProtocolType=http
&Timeout=30000
&<公共请求参数>
```

正常返回示例

`XML`格式

```
<RequestId>6856BCF6-11D6-4D7E-AC53-FD579933522B</RequestId>
<MonitorConfigId>MonitorConfigId1</MonitorConfigId>
```

`JSON`格式

```
{
    "RequestId":"6856BCF6-11D6-4D7E-AC53-FD579933522B",
    "MonitorConfigId":"MonitorConfigId1"
    }
```

## 错误码

访问[错误中心](https://error-center.aliyun.com/status/product/Alidns)查看更多错误码。

